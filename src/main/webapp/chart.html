<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
<head>
    <title>chart</title>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<div class="ct-chart ct-perfect-fourth"></div>
<script>
    var labels = [];
    var series = [];
    var serie = [];
    $(document).ready(function () {
        $.ajax(
            "/api/videoGames/grouped" +
            "?sales_type=Global_Sales&group_field=Plateform"
        )
            .done(function (arg) {
                $.each(arg, function (platform, data) {
                    labels.push(platform);
                    serie = [];
                    $.each(data, function (year, sales) {
                        if (year > 0) {
                            serie.push({x: year, y: sales})
                        }

                    });
                    series.push(serie);
                });
            })
            .fail(function () {
                alert("error");
            });

        console.log(labels);
        console.log(series);

        new Chartist.Line('.ct-chart', d, options);

    });

    var d = {
        series: series
    };
    var options = {
        axisX: {
            type: Chartist.AutoScaleAxis,
            onlyInteger: true
        },
        width: '80%',
        height: '50%',
        lineSmooth: Chartist.Interpolation.cardinal({
            tension: 0.2
        })
    }



</script>
</body>
</html>
